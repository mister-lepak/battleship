(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{122:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(40),c=n.n(r),o=(n(122),n(44)),s=n(94),l=n(15),u=(n(97),n(88)),h=n.n(u),j=function(e){var t=[],n=function(n){return t=[],h.a.times(e.shipLength,(function(e){t.push(n)}))};n(!1);var i=function(){return t.reduce((function(e,t){return e&&t}),!0)};return{shipDamagePosition:t,hit:function(n,a){var r={x:n,y:a},c="x",o="y";return"horizontal"===e.orientation&&(c="x",o="y"),"vertical"===e.orientation&&(c="y",o="x"),r[c]>=0&&r[c]<e.shipLength&&0===r[o]&&!t[r[c]]&&(i(),t[r[c]]=!0,!0)},boundary:e,isSunk:i,setShipInitialStatus:n}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return{shipsInfo:e.shipsInfo||[],gameBoardSizeX:e.gameBoardSizeX||10,gameBoardSizeY:e.gameBoardSizeY||10}},n=t(e),i=n.shipsInfo,a=n.gameBoardSizeX,r=n.gameBoardSizeY,c=function(){for(var e=[],t=0;t<r;t++){for(var n=[],c=0;c<a;c++)n.push({shipInfo:null,isDamaged:!1});e.push(n)}return i.forEach((function(t){for(var n="horizontal"===t.ship.boundary.orientation,i="vertical"===t.ship.boundary.orientation,a=0;a<t.ship.boundary.shipLength;a++){var r=t.origin.x+n*a,c=t.origin.y+i*a;e[c][r].shipInfo=t}})),e},o=c(),s=function(e,t){if(!0===o[t][e].isDamaged)return!1;if(null===o[t][e].shipInfo)return o[t][e].isDamaged=!0,"missed attack";var n=e-o[t][e].shipInfo.origin.x,i=t-o[t][e].shipInfo.origin.y;return o[t][e].isDamaged=!0,o[t][e].shipInfo.ship.hit(n,i)},l=function(){return i.reduce((function(e,t){return t.ship.isSunk()&&e}),!0)};return{gameBoardGrid:o,receiveAttack:s,areAllShipsSunk:l}},d=function(){return{makeRandomTurn:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,a=e||Math.floor(Math.random()*n),r=t||Math.floor(Math.random()*i);return{x:a,y:r}}}},x=n(74),O=n(148),f=n(55),p=n(146),m=n(145),g=n(3),v=function(e){return Object(g.jsx)(p.a.Column,{textAlign:"center",className:e.gridCSS,onClick:e.onClick})},y=function(e){var t=e.onCellClick||function(){};return e.gameBoard.gameBoardGrid.map((function(n,i){return n.map((function(n,a){var r="eachGrid";return n.isDamaged&&n.shipInfo&&(r="damagedGrid"),n.isDamaged&&!n.shipInfo&&(r="missedShotGrid"),!n.isDamaged&&n.shipInfo&&"AI"===e.accessiblePlayer&&(r="ownShips"),Object(g.jsx)(v,{gridCSS:r,onClick:function(){t(a,i)}})}))}))},S=n(144),k=function(e){var t=e.winner,n=e.open,i=void 0!==n&&n,a=e.setOpen,r=e.initializeStates;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(S.a,{basic:!0,onClose:function(){return a(!1)},onOpen:function(){return a(!0)},open:i,size:"small",children:[Object(g.jsxs)(O.a,{icon:!0,children:[Object(g.jsx)(f.a,{name:"winner"}),"Game Completes!"]}),Object(g.jsx)(S.a.Content,{textAlign:"center",children:Object(g.jsxs)("p",{children:[t," wins!",Object(g.jsx)("br",{}),"Want to play again?"]})}),Object(g.jsx)(S.a.Actions,{children:Object(g.jsxs)(m.a,{color:"green",inverted:!0,onClick:function(){a(!1),r()},children:[Object(g.jsx)(f.a,{name:"checkmark"})," Yes"]})})]})})};var I=function(){var e=d(),t=Object(i.useState)("Human"),n=Object(l.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(0),u=Object(l.a)(c,2),h=u[0],v=u[1],S=Object(i.useState)([]),I=Object(l.a)(S,2),A=I[0],C=I[1],B=Object(i.useState)(0),z=Object(l.a)(B,2),w=z[0],L=z[1],G=Object(i.useState)(["horizontal","vertical"]),D=Object(l.a)(G,2),Y=D[0],X=(D[1],Object(i.useState)(0)),F=Object(l.a)(X,2),H=F[0],M=F[1],P=Object(i.useState)(""),T=Object(l.a)(P,2),E=T[0],R=T[1],J=Object(i.useState)(!1),N=Object(l.a)(J,2),U=N[0],W=N[1],q=Object(i.useState)({value:!1,x:null,y:null}),K=Object(l.a)(q,2),Q=K[0],V=K[1],Z=Object(i.useState)({value:!1,x:null,y:null}),$=Object(l.a)(Z,2),_=$[0],ee=$[1],te=Object(i.useState)([1,-1,0,0]),ne=Object(l.a)(te,2),ie=ne[0],ae=(ne[1],Object(i.useState)([0,0,-1,1])),re=Object(l.a)(ae,2),ce=re[0],oe=(re[1],function(e){var t=e||[{x:7,y:2,orientation:"vertical",shipLength:2},{x:4,y:5,orientation:"horizontal",shipLength:3},{x:5,y:9,orientation:"horizontal",shipLength:4},{x:1,y:2,orientation:"vertical",shipLength:5}];if(0===t.length)return[];for(var n=[],i=0;i<t.length;i++)n=[].concat(Object(s.a)(n),[{ship:j({orientation:t[i].orientation,shipLength:t[i].shipLength}),origin:{x:t[i].x,y:t[i].y}}]);return n}),se=Object(i.useState)(b({shipsInfo:oe(A)})),le=Object(l.a)(se,2),ue=le[0],he=le[1],je=Object(i.useState)(b({shipsInfo:oe()})),be=Object(l.a)(je,2),de=be[0],xe=be[1];Object(i.useEffect)((function(){he(b({shipsInfo:oe(A)}))}),[A]);var Oe=function(e,t){var n=A.map((function(n){for(var i=[],a=0;a<w+2;a++){var r=t+(1===H)*a,c={relativeX:e+(0===H)*a-n.x,relativeY:r-n.y},o="relativeX",s="relativeY";"horizontal"===n.orientation&&(o="relativeX",s="relativeY"),"vertical"===n.orientation&&(o="relativeY",s="relativeX"),i.push(c[o]>=0&&c[o]<n.shipLength&&0===c[s])}return i.includes(!0)}));return 0!==n.length&&n.includes(!0)};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k,{winner:E,open:U,setOpen:W,initializeStates:function(){r("Human"),v(0),C([]),L(0),M(0),R(""),W(!1),he(b({shipsInfo:oe(A)})),xe(b({shipsInfo:oe()}))}}),Object(g.jsxs)(O.a,{icon:!0,as:"h1",textAlign:"center",children:[Object(g.jsx)(f.a,{name:"ship",size:"small"}),"Battleship Game"]}),h>0?Object(g.jsx)(g.Fragment,{}):Object(g.jsx)(O.a,{as:"h2",textAlign:"center",children:Object(g.jsx)(x.b,{to:"/",onClick:function(){v(1)},children:"Start Game"})}),h>0?Object(g.jsxs)(p.a,{children:[Object(g.jsx)(p.a.Column,{width:1}),Object(g.jsxs)(p.a.Column,{width:6,children:[Object(g.jsx)(O.a,{as:"h2",textAlign:"center",children:"User Board"}),Object(g.jsxs)(p.a,{columns:10,children:[Object(g.jsx)(y,{gameBoard:ue,accessiblePlayer:"AI",onCellClick:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(1===h){var i=0===H,a=1===H;if(e+i*(w+2)>n||t+a*(w+2)>n)return null;if(Oe(e,t))return null;C([].concat(Object(s.a)(A),[{x:e,y:t,orientation:Y[H],shipLength:w+2}])),L((function(e){return e+1}))}w>=3&&v(2)}}),";"]})]}),Object(g.jsx)(p.a.Column,{width:2}),Object(g.jsx)(p.a.Column,{width:6,children:h>1?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.a,{as:"h2",textAlign:"center",children:"AI Board"}),Object(g.jsx)(p.a,{columns:10,children:Object(g.jsx)(y,{gameBoard:de,accessiblePlayer:"Human",onCellClick:function(t,n){de.gameBoardGrid[n][t].isDamaged||"Human"!==a||de.areAllShipsSunk()||ue.areAllShipsSunk()||(de.receiveAttack(t,n),r("AI"),setTimeout((function(){var t={},n=1,i=3;do{_.value&&n>=0?(_.x-Q.x===0?t.x=_.x:t.x=_.x+ie[n],_.y-Q.y===0?t.y=_.y:t.y=_.y+ie[n],n-=1):Q.value&&i>=0?(t.x=Q.x+ie[i],t.y=Q.y+ce[i],i-=1):t=e.makeRandomTurn(),n<0&&ee({value:!1,x:null,y:null}),i<0&&(t=e.makeRandomTurn(),V({value:!1,x:null,y:null}))}while(!ue.receiveAttack(t.x,t.y));ue.gameBoardGrid[t.y][t.x].shipInfo&&(_.value&&(V({value:!0,x:_.x,y:_.y}),ee(Object(o.a)(Object(o.a)({},_),{},{value:!0,x:t.x,y:t.y}))),Q.value?ee(Object(o.a)(Object(o.a)({},_),{},{value:!0,x:t.x,y:t.y})):V(Object(o.a)(Object(o.a)({},Q),{},{value:!0,x:t.x,y:t.y}))),r("Human")}),1e3)),ue.areAllShipsSunk()&&(R("AI"),W(!0)),de.areAllShipsSunk()&&(R("Human"),W(!0))}})})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(O.a,{as:"h2",textAlign:"center",children:["Place your ship ",w+1," out of 4 ships"]}),Object(g.jsxs)(O.a,{as:"h3",textAlign:"center",children:["Ship Length: ",w+2,Object(g.jsx)("br",{}),"Ship Orientation: ",Y[H],Object(g.jsx)("br",{}),Object(g.jsx)(m.a,{primary:!0,textAlign:"center",onClick:function(){return M(1-H)},children:"Switch Ship Orientation"})]})]})})]}):Object(g.jsx)(g.Fragment,{})]})},A=n(10);n(131);c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(x.a,{children:Object(g.jsx)(A.b,{children:Object(g.jsx)(I,{})})})}),document.getElementById("root"))},97:function(e,t,n){}},[[132,1,2]]]);
//# sourceMappingURL=main.1545d7c3.chunk.js.map