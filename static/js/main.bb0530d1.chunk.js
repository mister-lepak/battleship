(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{121:function(e,n,t){},131:function(e,n,t){"use strict";t.r(n);var i=t(0),a=t.n(i),r=t(40),c=t.n(r),o=(t(121),t(92)),s=t(22),l=(t(95),t(104)),h=t.n(l),u=function(e){var n=[],t=function(t){return n=[],h.a.times(e.shipLength,(function(e){n.push(t)}))};t(!1);var i=function(){return n.reduce((function(e,n){return e&&n}),!0)};return{shipDamagePosition:n,hit:function(t,a){var r={x:t,y:a},c="x",o="y";return"horizontal"===e.orientation&&(c="x",o="y"),"vertical"===e.orientation&&(c="y",o="x"),r[c]>=0&&r[c]<e.shipLength&&0===r[o]&&!n[r[c]]&&(i(),n[r[c]]=!0,!0)},boundary:e,isSunk:i,setShipInitialStatus:t}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=function(n){return{shipsInfo:e.shipsInfo||[],gameBoardSizeX:e.gameBoardSizeX||10,gameBoardSizeY:e.gameBoardSizeY||10}},t=n(e),i=t.shipsInfo,a=t.gameBoardSizeX,r=t.gameBoardSizeY,c=function(){for(var e=[],n=0;n<r;n++){for(var t=[],c=0;c<a;c++)t.push({shipInfo:null,isDamaged:!1});e.push(t)}return i.forEach((function(n){for(var t="horizontal"===n.ship.boundary.orientation,i="vertical"===n.ship.boundary.orientation,a=0;a<n.ship.boundary.shipLength;a++){var r=n.origin.x+t*a,c=n.origin.y+i*a;e[c][r].shipInfo=n}})),e},o=c(),s=function(e,n){if(!0===o[n][e].isDamaged)return!1;if(null===o[n][e].shipInfo)return o[n][e].isDamaged=!0,"missed attack";var t=e-o[n][e].shipInfo.origin.x,i=n-o[n][e].shipInfo.origin.y;return o[n][e].isDamaged=!0,o[n][e].shipInfo.ship.hit(t,i)},l=function(){return i.reduce((function(e,n){return n.ship.isSunk()&&e}),!0)};return{gameBoardGrid:o,receiveAttack:s,areAllShipsSunk:l}},d=function(){return{makeRandomTurn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=Math.floor(Math.random()*e),i=Math.floor(Math.random()*n);return{x:t,y:i}}}},b=t(73),f=t(147),p=t(54),O=t(145),m=t(144),g=t(3),x=function(e){return Object(g.jsx)(O.a.Column,{textAlign:"center",className:e.gridCSS,onClick:e.onClick})},v=function(e){var n=e.onCellClick||function(){};return e.gameBoard.gameBoardGrid.map((function(t,i){return t.map((function(t,a){var r="eachGrid";return t.isDamaged&&t.shipInfo&&(r="damagedGrid"),t.isDamaged&&!t.shipInfo&&(r="missedShotGrid"),!t.isDamaged&&t.shipInfo&&"AI"===e.accessiblePlayer&&(r="ownShips"),Object(g.jsx)(x,{gridCSS:r,onClick:function(){n(a,i)}})}))}))},S=t(143),y=function(e){var n=e.winner,t=e.open,i=void 0!==t&&t,a=e.setOpen,r=e.initializeStates;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(S.a,{basic:!0,onClose:function(){return a(!1)},onOpen:function(){return a(!0)},open:i,size:"small",children:[Object(g.jsxs)(f.a,{icon:!0,children:[Object(g.jsx)(p.a,{name:"winner"}),"Game Completes!"]}),Object(g.jsx)(S.a.Content,{textAlign:"center",children:Object(g.jsxs)("p",{children:[n," wins!",Object(g.jsx)("br",{}),"Want to play again?"]})}),Object(g.jsx)(S.a.Actions,{children:Object(g.jsxs)(m.a,{color:"green",inverted:!0,onClick:function(){a(!1),r()},children:[Object(g.jsx)(p.a,{name:"checkmark"})," Yes"]})})]})})};var k=function(){var e=d(),n=Object(i.useState)("Human"),t=Object(s.a)(n,2),a=t[0],r=t[1],c=Object(i.useState)(0),l=Object(s.a)(c,2),h=l[0],x=l[1],S=Object(i.useState)([]),k=Object(s.a)(S,2),I=k[0],A=k[1],C=Object(i.useState)(0),z=Object(s.a)(C,2),B=z[0],w=z[1],L=Object(i.useState)(["horizontal","vertical"]),D=Object(s.a)(L,2),G=D[0],Y=(D[1],Object(i.useState)(0)),X=Object(s.a)(Y,2),F=X[0],H=X[1],M=Object(i.useState)(""),P=Object(s.a)(M,2),E=P[0],T=P[1],J=Object(i.useState)(!1),R=Object(s.a)(J,2),N=R[0],U=R[1],W=function(e){var n=e||[{x:7,y:2,orientation:"vertical",shipLength:2},{x:4,y:5,orientation:"horizontal",shipLength:3},{x:5,y:9,orientation:"horizontal",shipLength:4},{x:1,y:2,orientation:"vertical",shipLength:5}];if(0===n.length)return[];for(var t=[],i=0;i<n.length;i++)t=[].concat(Object(o.a)(t),[{ship:u({orientation:n[i].orientation,shipLength:n[i].shipLength}),origin:{x:n[i].x,y:n[i].y}}]);return t},q=Object(i.useState)(j({shipsInfo:W(I)})),K=Object(s.a)(q,2),Q=K[0],V=K[1],Z=Object(i.useState)(j({shipsInfo:W()})),$=Object(s.a)(Z,2),_=$[0],ee=$[1];Object(i.useEffect)((function(){V(j({shipsInfo:W(I)}))}),[I]);var ne=function(e,n){var t=I.map((function(t){for(var i=[],a=0;a<B+2;a++){var r=n+(1===F)*a,c={relativeX:e+(0===F)*a-t.x,relativeY:r-t.y},o="relativeX",s="relativeY";"horizontal"===t.orientation&&(o="relativeX",s="relativeY"),"vertical"===t.orientation&&(o="relativeY",s="relativeX"),i.push(c[o]>=0&&c[o]<t.shipLength&&0===c[s])}return i.includes(!0)}));return 0!==t.length&&t.includes(!0)};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(y,{winner:E,open:N,setOpen:U,initializeStates:function(){r("Human"),x(0),A([]),w(0),H(0),T(""),U(!1),V(j({shipsInfo:W(I)})),ee(j({shipsInfo:W()}))}}),Object(g.jsxs)(f.a,{icon:!0,as:"h1",textAlign:"center",children:[Object(g.jsx)(p.a,{name:"ship",size:"small"}),"Battleship Game"]}),h>0?Object(g.jsx)(g.Fragment,{}):Object(g.jsx)(f.a,{as:"h2",textAlign:"center",children:Object(g.jsx)(b.b,{to:"/",onClick:function(){x(1)},children:"Start Game"})}),h>0?Object(g.jsxs)(O.a,{children:[Object(g.jsx)(O.a.Column,{width:1}),Object(g.jsxs)(O.a.Column,{width:6,children:[Object(g.jsx)(f.a,{as:"h2",textAlign:"center",children:"User Board"}),Object(g.jsxs)(O.a,{columns:10,children:[Object(g.jsx)(v,{gameBoard:Q,accessiblePlayer:"AI",onCellClick:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(1===h){var i=0===F,a=1===F;if(e+i*(B+2)>t||n+a*(B+2)>t)return null;if(console.log(ne(e,n)),ne(e,n))return null;A([].concat(Object(o.a)(I),[{x:e,y:n,orientation:G[F],shipLength:B+2}])),w((function(e){return e+1}))}B>=3&&x(2)}}),";"]})]}),Object(g.jsx)(O.a.Column,{width:2}),Object(g.jsx)(O.a.Column,{width:6,children:h>1?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(f.a,{as:"h2",textAlign:"center",children:"AI Board"}),Object(g.jsx)(O.a,{columns:10,children:Object(g.jsx)(v,{gameBoard:_,accessiblePlayer:"Human",onCellClick:function(n,t){_.gameBoardGrid[t][n].isDamaged||"Human"!==a||_.areAllShipsSunk()||Q.areAllShipsSunk()||(_.receiveAttack(n,t),r("AI"),setTimeout((function(){var n={};do{n=e.makeRandomTurn()}while(!Q.receiveAttack(n.x,n.y));r("Human")}),1e3)),Q.areAllShipsSunk()&&(T("AI"),U(!0)),_.areAllShipsSunk()&&(T("Human"),U(!0))}})})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(f.a,{as:"h2",textAlign:"center",children:["Place your ship ",B+1," out of 4 ships"]}),Object(g.jsxs)(f.a,{as:"h3",textAlign:"center",children:["Ship Length: ",B+2,Object(g.jsx)("br",{}),"Ship Orientation: ",G[F],Object(g.jsx)("br",{}),Object(g.jsx)(m.a,{primary:!0,textAlign:"center",onClick:function(){return H(1-F)},children:"Switch Ship Orientation"})]})]})})]}):Object(g.jsx)(g.Fragment,{})]})},I=t(10);t(130);c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(b.a,{children:Object(g.jsx)(I.b,{children:Object(g.jsx)(k,{})})})}),document.getElementById("root"))},95:function(e,n,t){}},[[131,1,2]]]);
//# sourceMappingURL=main.bb0530d1.chunk.js.map